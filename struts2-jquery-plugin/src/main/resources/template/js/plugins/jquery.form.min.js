/*!
 * jQuery Form Plugin
 * version: 3.03 (08-MAR-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
(function(e){var c={};c.fileapi=e("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;e.fn.ajaxSubmit=function(g){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var f,t,i,k=this;if(typeof g=="function"){g={success:g}}f=this.attr("method");t=this.attr("action");i=(typeof t==="string")?e.trim(t):"";i=i||window.location.href||"";if(i){i=(i.match(/^([^#]+)/)||[])[1]}g=e.extend(true,{url:i,success:e.ajaxSettings.success,type:f||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},g);var o={};this.trigger("form-pre-serialize",[this,g,o]);if(o.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(g.beforeSerialize&&g.beforeSerialize(this,g)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var j=g.traditional;if(j===undefined){j=e.ajaxSettings.traditional}var w,x=this.formToArray(g.semantic);if(g.data){g.extraData=g.data;w=e.param(g.data,j)}if(g.beforeSubmit&&g.beforeSubmit(x,this,g)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[x,this,g,o]);if(o.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var s=e.param(x,j);if(w){s=(s?(s+"&"+w):w)}if(g.type.toUpperCase()=="GET"){g.url+=(g.url.indexOf("?")>=0?"&":"?")+s;g.data=null}else{g.data=s}var z=[];if(g.resetForm){z.push(function(){k.resetForm()})}if(g.clearForm){z.push(function(){k.clearForm(g.includeHidden)})}if(!g.dataType&&g.target){var h=g.success||function(){};z.push(function(A){var q=g.replaceTarget?"replaceWith":"html";e(g.target)[q](A).each(h,arguments)})}else{if(g.success){z.push(g.success)}}g.success=function(D,A,E){var C=g.context||g;for(var B=0,q=z.length;B<q;B++){z[B].apply(C,[D,A,E||k,k])}};var v=e("input:file:enabled[value]",this);var l=v.length>0;var u="multipart/form-data";var r=(k.attr("enctype")==u||k.attr("encoding")==u);var p=c.fileapi&&c.formdata;d("fileAPI :"+p);var m=(l||r)&&!p;if(g.iframe!==false&&(g.iframe||m)){if(g.closeKeepAlive){e.get(g.closeKeepAlive,function(){y(x)})}else{y(x)}}else{if((l||r)&&p){n(x)}else{e.ajax(g)}}this.trigger("form-submit-notify",[this,g]);return this;function n(A){var q=new FormData();for(var C=0;C<A.length;C++){q.append(A[C].name,A[C].value)}if(g.extraData){for(var B in g.extraData){if(g.extraData.hasOwnProperty(B)){q.append(B,g.extraData[B])}}}g.data=null;var E=e.extend(true,{},e.ajaxSettings,g,{contentType:false,processData:false,cache:false,type:"POST"});if(g.uploadProgress){E.xhr=function(){var F=jQuery.ajaxSettings.xhr();if(F.upload){F.upload.onprogress=function(H){var G=0;if(H.lengthComputable){G=parseInt((H.position/H.total)*100,10)}g.uploadProgress(H,H.position,H.total,G)}}return F}}E.data=null;var D=E.beforeSend;E.beforeSend=function(G,F){F.data=q;if(D){D.call(F,G,g)}};e.ajax(E)}function y(Z){var E=k[0],D,V,P,X,S,G,K,I,J,T,W,N;var H=!!e.fn.prop;if(Z){if(H){for(V=0;V<Z.length;V++){D=e(E[Z[V].name]);D.prop("disabled",false)}}else{for(V=0;V<Z.length;V++){D=e(E[Z[V].name]);D.removeAttr("disabled")}}}if(e(":input[name=submit],:input[id=submit]",E).length){alert('Error: Form elements must not have name or id of "submit".');return}P=e.extend(true,{},e.ajaxSettings,g);P.context=P.context||P;S="jqFormIO"+(new Date().getTime());if(P.iframeTarget){G=e(P.iframeTarget);T=G.attr("name");if(!T){G.attr("name",S)}else{S=T}}else{G=e('<iframe name="'+S+'" src="'+P.iframeSrc+'" />');G.css({position:"absolute",top:"-1000px",left:"-1000px"})}K=G[0];I={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ac){var ad=(ac==="timeout"?"timeout":"aborted");d("aborting upload... "+ad);this.aborted=1;G.attr("src",P.iframeSrc);I.error=ad;if(P.error){P.error.call(P.context,I,ad,ac)}if(X){e.event.trigger("ajaxError",[I,P,ad])}if(P.complete){P.complete.call(P.context,I,ad)}}};X=P.global;if(X&&0===e.active++){e.event.trigger("ajaxStart")}if(X){e.event.trigger("ajaxSend",[I,P])}if(P.beforeSend&&P.beforeSend.call(P.context,I,P)===false){if(P.global){e.active--}return}if(I.aborted){return}J=E.clk;if(J){T=J.name;if(T&&!J.disabled){P.extraData=P.extraData||{};P.extraData[T]=J.value;if(J.type=="image"){P.extraData[T+".x"]=E.clk_x;P.extraData[T+".y"]=E.clk_y}}}var O=1;var L=2;function M(ad){var ac=ad.contentWindow?ad.contentWindow.document:ad.contentDocument?ad.contentDocument:ad.document;return ac}var C=e("meta[name=csrf-token]").attr("content");var B=e("meta[name=csrf-param]").attr("content");if(B&&C){P.extraData=P.extraData||{};P.extraData[B]=C}function U(){var ae=k.attr("target"),ac=k.attr("action");E.setAttribute("target",S);if(!f){E.setAttribute("method","POST")}if(ac!=P.url){E.setAttribute("action",P.url)}if(!P.skipEncodingOverride&&(!f||/post/i.test(f))){k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(P.timeout){N=setTimeout(function(){W=true;R(O)},P.timeout)}function af(){try{var ah=M(K).readyState;d("state = "+ah);if(ah&&ah.toLowerCase()=="uninitialized"){setTimeout(af,50)}}catch(ai){d("Server abort: ",ai," (",ai.name,")");R(L);if(N){clearTimeout(N)}N=undefined}}var ad=[];try{if(P.extraData){for(var ag in P.extraData){if(P.extraData.hasOwnProperty(ag)){ad.push(e('<input type="hidden" name="'+ag+'">').attr("value",P.extraData[ag]).appendTo(E)[0])}}}if(!P.iframeTarget){G.appendTo("body");if(K.attachEvent){K.attachEvent("onload",R)}else{K.addEventListener("load",R,false)}}setTimeout(af,15);E.submit()}finally{E.setAttribute("action",ac);if(ae){E.setAttribute("target",ae)}else{k.removeAttr("target")}e(ad).remove()}}if(P.forceSync){U()}else{setTimeout(U,10)}var aa,ab,Y=50,F;function R(ah){if(I.aborted||F){return}try{ab=M(K)}catch(ak){d("cannot access response document: ",ak);ah=L}if(ah===O&&I){I.abort("timeout");return}else{if(ah==L&&I){I.abort("server abort");return}}if(!ab||ab.location.href==P.iframeSrc){if(!W){return}}if(K.detachEvent){K.detachEvent("onload",R)}else{K.removeEventListener("load",R,false)}var af="success",aj;try{if(W){throw"timeout"}var ae=P.dataType=="xml"||ab.XMLDocument||e.isXMLDoc(ab);d("isXml="+ae);if(!ae&&window.opera&&(ab.body===null||!ab.body.innerHTML)){if(--Y){d("requeing onLoad callback, DOM not available");setTimeout(R,250);return}}var al=ab.body?ab.body:ab.documentElement;I.responseText=al?al.innerHTML:null;I.responseXML=ab.XMLDocument?ab.XMLDocument:ab;if(ae){P.dataType="xml"}I.getResponseHeader=function(ao){var an={"content-type":P.dataType};return an[ao]};if(al){I.status=Number(al.getAttribute("status"))||I.status;I.statusText=al.getAttribute("statusText")||I.statusText}var ac=(P.dataType||"").toLowerCase();var ai=/(json|script|text)/.test(ac);if(ai||P.textarea){var ag=ab.getElementsByTagName("textarea")[0];if(ag){I.responseText=ag.value;I.status=Number(ag.getAttribute("status"))||I.status;I.statusText=ag.getAttribute("statusText")||I.statusText}else{if(ai){var ad=ab.getElementsByTagName("pre")[0];var am=ab.getElementsByTagName("body")[0];if(ad){I.responseText=ad.textContent?ad.textContent:ad.innerText}else{if(am){I.responseText=am.textContent?am.textContent:am.innerText}}}}}else{if(ac=="xml"&&!I.responseXML&&I.responseText){I.responseXML=Q(I.responseText)}}try{aa=q(I,ac,P)}catch(ah){af="parsererror";I.error=aj=(ah||af)}}catch(ah){d("error caught: ",ah);af="error";I.error=aj=(ah||af)}if(I.aborted){d("upload aborted");af=null}if(I.status){af=(I.status>=200&&I.status<300||I.status===304)?"success":"error"}if(af==="success"){if(P.success){P.success.call(P.context,aa,"success",I)}if(X){e.event.trigger("ajaxSuccess",[I,P])}}else{if(af){if(aj===undefined){aj=I.statusText}if(P.error){P.error.call(P.context,I,af,aj)}if(X){e.event.trigger("ajaxError",[I,P,aj])}}}if(X){e.event.trigger("ajaxComplete",[I,P])}if(X&&!--e.active){e.event.trigger("ajaxStop")}if(P.complete){P.complete.call(P.context,I,af)}F=true;if(P.timeout){clearTimeout(N)}setTimeout(function(){if(!P.iframeTarget){G.remove()}I.responseXML=null},100)}var Q=e.parseXML||function(ac,ad){if(window.ActiveXObject){ad=new ActiveXObject("Microsoft.XMLDOM");ad.async="false";ad.loadXML(ac)}else{ad=(new DOMParser()).parseFromString(ac,"text/xml")}return(ad&&ad.documentElement&&ad.documentElement.nodeName!="parsererror")?ad:null};var A=e.parseJSON||function(ac){return window["eval"]("("+ac+")")};var q=function(ah,af,ae){var ad=ah.getResponseHeader("content-type")||"",ac=af==="xml"||!af&&ad.indexOf("xml")>=0,ag=ac?ah.responseXML:ah.responseText;if(ac&&ag.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(ae&&ae.dataFilter){ag=ae.dataFilter(ag,af)}if(typeof ag==="string"){if(af==="json"||!af&&ad.indexOf("json")>=0){ag=A(ag)}else{if(af==="script"||!af&&ad.indexOf("javascript")>=0){e.globalEval(ag)}}}return ag}}};e.fn.ajaxForm=function(f){f=f||{};f.delegation=f.delegation&&e.isFunction(e.fn.on);if(!f.delegation&&this.length===0){var g={s:this.selector,c:this.context};if(!e.isReady&&g.s){d("DOM not ready, queuing ajaxForm");e(function(){e(g.s,g.c).ajaxForm(f)});return this}d("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(f.delegation){e(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,f,b).on("click.form-plugin",this.selector,f,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",f,b).bind("click.form-plugin",f,a)};function b(g){var f=g.data;if(!g.isDefaultPrevented()){g.preventDefault();e(this).ajaxSubmit(f)}}function a(j){var i=j.target;var g=e(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length===0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!==undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof e.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)}e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(u){var t=[];if(this.length===0){return t}var h=this[0];var m=u?h.getElementsByTagName("*"):h.elements;if(!m){return t}var p,o,l,w,k,r,g;for(p=0,r=m.length;p<r;p++){k=m[p];l=k.name;if(!l){continue}if(u&&h.clk&&k.type=="image"){if(!k.disabled&&h.clk==k){t.push({name:l,value:e(k).val(),type:k.type});t.push({name:l+".x",value:h.clk_x},{name:l+".y",value:h.clk_y})}continue}w=e.fieldValue(k,true);if(w&&w.constructor==Array){for(o=0,g=w.length;o<g;o++){t.push({name:l,value:w[o]})}}else{if(c.fileapi&&k.type=="file"&&!k.disabled){var f=k.files;for(o=0;o<f.length;o++){t.push({name:l,value:f[o],type:k.type})}}else{if(w!==null&&typeof w!="undefined"){t.push({name:l,value:w,type:k.type})}}}}if(!u&&h.clk){var q=e(h.clk),s=q[0];l=s.name;if(l&&!s.disabled&&s.type=="image"){t.push({name:l,value:q.val()});t.push({name:l+".x",value:h.clk_x},{name:l+".y",value:h.clk_y})}}return t};e.fn.formSerialize=function(f){return e.param(this.formToArray(f))};e.fn.fieldSerialize=function(g){var f=[];this.each(function(){var l=this.name;if(!l){return}var j=e.fieldValue(this,g);if(j&&j.constructor==Array){for(var k=0,h=j.length;k<h;k++){f.push({name:l,value:j[k]})}}else{if(j!==null&&typeof j!="undefined"){f.push({name:this.name,value:j})}}});return e.param(f)};e.fn.fieldValue=function(l){for(var k=[],h=0,f=this.length;h<f;h++){var j=this[h];var g=e.fieldValue(j,l);if(g===null||typeof g=="undefined"||(g.constructor==Array&&!g.length)){continue}if(g.constructor==Array){e.merge(k,g)}else{k.push(g)}}return k};e.fieldValue=function(f,m){var h=f.name,s=f.type,u=f.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!h||f.disabled||s=="reset"||s=="button"||(s=="checkbox"||s=="radio")&&!f.checked||(s=="submit"||s=="image")&&f.form&&f.form.clk!=f||u=="select"&&f.selectedIndex==-1)){return null}if(u=="select"){var o=f.selectedIndex;if(o<0){return null}var q=[],g=f.options;var k=(s=="select-one");var p=(k?o+1:g.length);for(var j=(k?o:0);j<p;j++){var l=g[j];if(l.selected){var r=l.value;if(!r){r=(l.attributes&&l.attributes.value&&!(l.attributes.value.specified))?l.text:l.value}if(k){return r}q.push(r)}}return q}return e(f).val()};e.fn.clearForm=function(f){return this.each(function(){e("input,select,textarea",this).clearFields(f)})};e.fn.clearFields=e.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,h=this.tagName.toLowerCase();if(g.test(i)||h=="textarea"||(f&&/hidden/.test(i))){this.value=""}else{if(i=="checkbox"||i=="radio"){this.checked=false}else{if(h=="select"){this.selectedIndex=-1}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};e.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};e.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var g=this.type;if(g=="checkbox"||g=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var h=e(this).parent("select");if(f&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=f}}})};e.fn.ajaxSubmit.debug=false;function d(){if(!e.fn.ajaxSubmit.debug){return}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}})(jQuery);