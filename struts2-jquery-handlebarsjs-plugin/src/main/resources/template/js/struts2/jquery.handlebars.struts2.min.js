/*

 jquery.handlebars.struts2.js

 Integration of HandleBarsJS with struts 2

 Requires use of jquery.struts2.js

 Copyright (c) 2010 Johannes Geppert http://www.jgeppert.com

 Dual licensed under the MIT and GPL licenses:
   http://www.opensource.org/licenses/mit-license.php
   http://www.gnu.org/licenses/gpl.html

*/
'use strict';(function(a){a.struts2_jquery_handlebars={handler:{},handlebars:function(b){var c=this;c.require("js/handlebars/handlebars.runtime"+c.minSuffix+".js");b.url?"precompiled"===b.type?c.require(b.url):"template"===b.type&&(c.log("loading remote handlebars template "+b.url),a.ajax({type:"GET",scriptCharset:"UTF-8",url:b.url,success:function(c){a.struts2_jquery_handlebars.compileTemplate(c,b.name)},dataType:"text",cache:!0,async:!1})):c.compileTemplate(a(c.escId(b.id)).html(),b.name);a.each(b.targets.split(","),
function(d,g){a.each(b.listenTopics.split(","),function(d,e){var f=a.struts2_jquery_handlebars.escId(g);a(f).isSubscribed(e)&&a(f).unsubscribe(e);a(f).subscribe(e,function(d,e){d.originalEvent.templateResult||(d.originalEvent.templateResult=c.runTemplate(b.name,d.originalEvent.data));a(this).html(d.originalEvent.templateResult)})})})},compileTemplate:function(b,c){var d=null;Handlebars&&Handlebars.templates&&(d=jQuery.extend(!0,{},Handlebars.templates));a.struts2_jquery_handlebars.require("js/handlebars/handlebars"+
a.struts2_jquery_handlebars.minSuffix+".js",function(){d&&(Handlebars.templates=d)});a.struts2_jquery_handlebars.log("compiling handlebars template "+c);Handlebars.templates||(Handlebars.templates={});Handlebars.templates[c]=Handlebars.compile(b)},runTemplate:function(b,c){a.struts2_jquery_handlebars.log("running handlebars template "+b);return Handlebars.templates[b](c)}};a.extend(!0,a.struts2_jquery_handlebars,a.struts2_jquery);a.struts2_jquery_handlebars.debugPrefix="[struts2_jquery_handlebars] "})(jQuery);